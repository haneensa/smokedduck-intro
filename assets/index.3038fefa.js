(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function B(){}function Gt(e){return e()}function Nt(){return Object.create(null)}function oe(e){e.forEach(Gt)}function Dt(e){return typeof e=="function"}function we(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Jn(e){return Object.keys(e).length===0}function Mn(e,...t){if(e==null)return B;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function me(e,t,n){e.$$.on_destroy.push(Mn(t,n))}function ke(e,t,n){return e.set(n),t}function h(e,t){e.appendChild(t)}function G(e,t,n){e.insertBefore(t,n||null)}function U(e){e.parentNode&&e.parentNode.removeChild(e)}function Ft(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function Ct(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e){return document.createTextNode(e)}function v(){return $(" ")}function he(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Un(e){return Array.from(e.childNodes)}function xe(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ze(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let Re;function Yn(){if(Re===void 0){Re=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Re=!0}}return Re}function zn(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=g("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=Yn();let o;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=he(window,"message",l=>{l.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{o=he(i.contentWindow,"resize",t),t()}),h(e,i),()=>{(r||o&&i.contentWindow)&&o(),U(i)}}let ge;function de(e){ge=e}function st(){if(!ge)throw new Error("Function called outside component initialization");return ge}function Je(e){st().$$.on_mount.push(e)}function Wt(e){st().$$.after_update.push(e)}function jt(e){st().$$.on_destroy.push(e)}const te=[],D=[];let re=[];const Rt=[],Vt=Promise.resolve();let rt=!1;function Kt(){rt||(rt=!0,Vt.then(Zt))}function pe(){return Kt(),Vt}function Pe(e){re.push(e)}const Xe=new Set;let X=0;function Zt(){if(X!==0)return;const e=ge;do{try{for(;X<te.length;){const t=te[X];X++,de(t),$n(t.$$)}}catch(t){throw te.length=0,X=0,t}for(de(null),te.length=0,X=0;D.length;)D.pop()();for(let t=0;t<re.length;t+=1){const n=re[t];Xe.has(n)||(Xe.add(n),n())}re.length=0}while(te.length);for(;Rt.length;)Rt.pop()();rt=!1,Xe.clear(),de(e)}function $n(e){if(e.fragment!==null){e.update(),oe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Pe)}}function Qn(e){const t=[],n=[];re.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),re=t}const Ie=new Set;let W;function it(){W={r:0,c:[],p:W}}function ot(){W.r||oe(W.c),W=W.p}function J(e,t){e&&e.i&&(Ie.delete(e),e.i(t))}function Y(e,t,n,i){if(e&&e.o){if(Ie.has(e))return;Ie.add(e),W.c.push(()=>{Ie.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function at(e){e&&e.c()}function Me(e,t,n,i){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),i||Pe(()=>{const l=e.$$.on_mount.map(Gt).filter(Dt);e.$$.on_destroy?e.$$.on_destroy.push(...l):oe(l),e.$$.on_mount=[]}),o.forEach(Pe)}function Ue(e,t){const n=e.$$;n.fragment!==null&&(Qn(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Gn(e,t){e.$$.dirty[0]===-1&&(te.push(e),Kt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ye(e,t,n,i,r,o,l,a=[-1]){const c=ge;de(e);const s=e.$$={fragment:null,ctx:[],props:o,update:B,not_equal:r,bound:Nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Nt(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};l&&l(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(u,p,...d)=>{const _=d.length?d[0]:p;return s.ctx&&r(s.ctx[u],s.ctx[u]=_)&&(!s.skip_bound&&s.bound[u]&&s.bound[u](_),f&&Gn(e,u)),p}):[],s.update(),f=!0,oe(s.before_update),s.fragment=i?i(s.ctx):!1,t.target){if(t.hydrate){const u=Un(t.target);s.fragment&&s.fragment.l(u),u.forEach(U)}else s.fragment&&s.fragment.c();t.intro&&J(e.$$.fragment),Me(e,t.target,t.anchor,t.customElement),Zt()}de(c)}class ze{$destroy(){Ue(this,1),this.$destroy=B}$on(t,n){if(!Dt(n))return B;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Jn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ne(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function z(e){return function t(n){return arguments.length===0||ne(n)?t:e.apply(this,arguments)}}function $e(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return ne(n)?t:z(function(r){return e(n,r)});default:return ne(n)&&ne(i)?t:ne(n)?z(function(r){return e(r,i)}):ne(i)?z(function(r){return e(n,r)}):e(n,i)}}}const Xt=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Dn(e){return Object.prototype.toString.call(e)==="[object String]"}function Te(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var kt=Object.prototype.toString,Fn=function(){return kt.call(arguments)==="[object Arguments]"?function(t){return kt.call(t)==="[object Arguments]"}:function(t){return Te("callee",t)}}();const en=Fn;var Wn=!{toString:null}.propertyIsEnumerable("toString"),xt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],It=function(){return arguments.propertyIsEnumerable("length")}(),jn=function(t,n){for(var i=0;i<t.length;){if(t[i]===n)return!0;i+=1}return!1},Vn=z(typeof Object.keys=="function"&&!It?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,i,r=[],o=It&&en(t);for(n in t)Te(n,t)&&(!o||n!=="length")&&(r[r.length]=n);if(Wn)for(i=xt.length-1;i>=0;)n=xt[i],Te(n,t)&&!jn(r,n)&&(r[r.length]=n),i-=1;return r});const Ht=Vn;var Kn=z(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});const Pt=Kn;function Zn(e){return e}var Xn=z(Zn);const er=Xn;function Tt(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function Bt(e,t,n){for(var i=0,r=n.length;i<r;){if(e(t,n[i]))return!0;i+=1}return!1}function tr(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function nr(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const et=typeof Object.is=="function"?Object.is:nr;function Lt(e,t,n,i){var r=Tt(e),o=Tt(t);function l(a,c){return ct(a,c,n.slice(),i.slice())}return!Bt(function(a,c){return!Bt(l,c,a)},o,r)}function ct(e,t,n,i){if(et(e,t))return!0;var r=Pt(e);if(r!==Pt(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&tr(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&et(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!et(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var o=n.length-1;o>=0;){if(n[o]===e)return i[o]===t;o-=1}switch(r){case"Map":return e.size!==t.size?!1:Lt(e.entries(),t.entries(),n.concat([e]),i.concat([t]));case"Set":return e.size!==t.size?!1:Lt(e.values(),t.values(),n.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=Ht(e);if(l.length!==Ht(t).length)return!1;var a=n.concat([e]),c=i.concat([t]);for(o=l.length-1;o>=0;){var s=l[o];if(!(Te(s,t)&&ct(t[s],e[s],a,c)))return!1;o-=1}return!0}var rr=$e(function(t,n){return ct(t,n,[],[])});const tn=rr;function ir(e,t,n){var i,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(i=1/t;n<e.length;){if(r=e[n],r===0&&1/r===i)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(r=e[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(tn(e[n],t))return n;n+=1}return-1}function or(e){return Object.prototype.toString.call(e)==="[object Object]"}function lr(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var sr=z(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():Xt(t)?[]:Dn(t)?"":or(t)?{}:en(t)?function(){return arguments}():lr(t)?t.constructor.from(""):void 0});const ar=sr;var cr=$e(function(t,n){return typeof n.indexOf=="function"&&!Xt(n)?n.indexOf(t):ir(n,t,0)});const ur=cr;var fr=z(function(t){return t!=null&&tn(t,ar(t))});const hr=fr;var dr=$e(function(t,n){var i=Number(n),r=0,o;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(o=new Array(i);r<i;)o[r]=t(r),r+=1;return o});const j=dr;var pr=$e(function(t,n){for(var i=[],r=0,o=Math.min(t.length,n.length);r<o;)i[r]=[t[r],n[r]],r+=1;return i});const _r=pr;function L({columns:e,rows:t}){return{col_labels:e,row_labels:j(er,t.length),data:t}}function V(e,t,n,i,r){let o=null;return n?o={lhs:t,lhs2:n,rhs:i}:o={lhs:t,rhs:i},{css_id:e,tables:o,expr:{code:"",range:{start:{line:0,ch:0},end:{line:1,ch:0}}},annotations:r}}function mr(e,t,n){var i;(i=t.exprs[e])==null||i.forEach(([r,o])=>{let l=r==0?"lhs":"lhs2";o.forEach(a=>n.push({type:"box",target:{table:l,row:"all",col:a}}))})}function nn(e,t,n,i){let r=n.col[e];r.forEach((o,l)=>{o.forEach(a=>{i.push({type:"arrow",from:{table:"lhs",row:"header",col:a},to:{table:"rhs",row:"header",col:l}})})}),j(o=>{r.flat().includes(o)||i.push({type:"crossout",target:{table:"lhs",row:"all",col:o}})},t.columns.length)}function rn(e,t,n,i){if(!t)return;t[0][1].forEach(([o,l])=>{let a={table:"lhs",row:l,col:"all"},c={table:"rhs",row:o,col:"all"};n.push({type:"color_set",set:[a,c]}),n.push({type:"arrow",from:a,to:c})});let r=t[0][1].map(([o,l])=>l);j(o=>{r.includes(o)||n.push({type:"crossout",target:{table:"lhs",row:o,col:"all"}})},i)}function on(e,t,n){console.log("projection: ",e,t);let i=t.info[e],r=t.op[e][0],o=t.results[r],l=t.results[e],a=t.col[e];console.log(r,o,l,a),n.desc="Projection - keeping the fields: "+i.schema,n.opType="projectionOp",n.tableCaptions.lhs="output of: "+r;let c=[];return nn(e,o,t,c),j(s=>{c.push({type:"color_set",set:[{table:"lhs",row:s,col:"all"},{table:"rhs",row:s,col:"all"}]})},l.rows.length),V(i.name,L(o),null,L(l),c)}function T(e,t,n){let i=t.op[e][0],r=t.op[e][1],o=t.results[i],l=t.results[r],a=t.results[e],c=t.row[e];t.col[e];let s=t.info[e];console.log("join",e,a),n.desc="matches up tuples of both tables based on condition: "+s.str,n.opType="joinOp",n.tableCaptions.lhs=t.info[i].table_name,n.tableCaptions.lhs2=t.info[r].table_name;let f=[];if(mr(e,t,f),c){let _=c[0][1],m=c[1][1];_r(_,m).forEach(([[y,A],[w,O]])=>{let E={table:"lhs",col:"all",row:A},I={table:"lhs2",col:"all",row:O},K={table:"rhs",col:"all",row:y};f.push({type:"color_set",set:[E,I,K]}),f.push({type:"arrow",from:E,to:I})})}let u=L(o),p=L(l),d=null;return a&&(d=L(a)),V(s.name,u,p,d,f)}function ln(e,t,n){let i=t.op[e][0],r=L(t.results[i]),o=L(t.results[e]),l=t.info[e];n.desc=l.str,n.opType="simpleAggs",n.tableCaptions.lhs=t.info[i].name;let a=[];return j(c=>{let s={table:"lhs",col:"all",row:c},f={table:"rhs",col:"all",row:0};a.push({type:"arrow",from:s,to:f})},r.data.length),V(l.name,r,null,o,a)}function Be(e,t,n){console.log("groupby",e,t);let i=L(t.results[e]),r=t.row[e],o=t.info[e],l=t.op[e][0];l==null&&(l=o.delim_children);let a=L(t.results[l]);console.log(l,a,i,r),n.desc="Groups rows and merges their data: "+o.str,n.opType="hashGroupOp",n.tableCaptions.lhs=t.info[l].name;let c=[],s=j(f=>({type:"color_set",set:[{table:"rhs",row:f,col:"all"}]}),i.data.length);return r.forEach(([f,u])=>{u.forEach(([p,d])=>{let _={table:"lhs",col:"all",row:d},m={table:"rhs",col:"all",row:p};c.push({type:"arrow",from:_,to:m}),s[p].set.push(_)})}),c=c.concat(s),V(o.name,a,null,i,c)}function Q(e,t,n){console.log("filter",t);let i=t.op[e][0],r=L(t.results[i]),o=L(t.results[e]),l=t.row[e],a=t.info[e];console.log("info ",a),n.desc="Filter - only keeping tuples meeting the condition: "+a.str,n.opType="filterOp",n.tableCaptions.lhs="output of: "+t.op[e][0];let c=[],s=[],f=r.data.length;return rn(e,l,c,f),c=s.concat(c),V(a.name,r,null,o,c)}function ie(e,t,n){console.log("scan",t);let i=t.info[e],r=t.row[e],o=[],l=t.results[e+"input"],a=t.results[e];l||(l=a);let c=L(l),s=L(a);if(n.opType="scanOp",n.tableCaptions.lhs="table: "+i.table_name,r){n.desc="Scans the tuples of the input table with filter pushed down"+i.str;let f=c.data.length;rn(e,r,o,f)}else n.desc="Scans all the tuples of the input table "+i.str,j(f=>{let u={table:"lhs",row:f,col:"all"},p={table:"rhs",row:f,col:"all"};o.push({type:"color_set",set:[u,p]}),o.push({type:"arrow",from:u,to:p})},s.data.length);return e in t.col&&nn(e,l,t,o),V(i.name,c,null,s,o)}function sn(e,t,n){let i=t.op[e][0],r=L(t.results[i]),o=t.info[e];n.opType="queryOp",n.desc="Query"+t.qstr,n.tableCaptions.lhs=o.name;let l=[];return V(o.name,r,null,null,l)}var lt="http://www.w3.org/1999/xhtml";const qt={svg:"http://www.w3.org/2000/svg",xhtml:lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),qt.hasOwnProperty(t)?{space:qt[t],local:e}:e}function gr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lt&&t.documentElement.namespaceURI===lt?t.createElement(e):t.createElementNS(n,e)}}function yr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function cn(e){var t=an(e);return(t.local?yr:gr)(t)}function wr(){}function un(e){return e==null?wr:function(){return this.querySelector(e)}}function br(e){typeof e!="function"&&(e=un(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],l=o.length,a=i[r]=new Array(l),c,s,f=0;f<l;++f)(c=o[f])&&(s=e.call(c,c.__data__,f,o))&&("__data__"in c&&(s.__data__=c.__data__),a[f]=s);return new M(i,this._parents)}function vr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sr(){return[]}function Ar(e){return e==null?Sr:function(){return this.querySelectorAll(e)}}function Er(e){return function(){return vr(e.apply(this,arguments))}}function Or(e){typeof e=="function"?e=Er(e):e=Ar(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var l=t[o],a=l.length,c,s=0;s<a;++s)(c=l[s])&&(i.push(e.call(c,c.__data__,s,l)),r.push(c));return new M(i,r)}function Nr(e){return function(){return this.matches(e)}}function fn(e){return function(t){return t.matches(e)}}var Cr=Array.prototype.find;function Rr(e){return function(){return Cr.call(this.children,e)}}function kr(){return this.firstElementChild}function xr(e){return this.select(e==null?kr:Rr(typeof e=="function"?e:fn(e)))}var Ir=Array.prototype.filter;function Hr(){return Array.from(this.children)}function Pr(e){return function(){return Ir.call(this.children,e)}}function Tr(e){return this.selectAll(e==null?Hr:Pr(typeof e=="function"?e:fn(e)))}function Br(e){typeof e!="function"&&(e=Nr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],l=o.length,a=i[r]=[],c,s=0;s<l;++s)(c=o[s])&&e.call(c,c.__data__,s,o)&&a.push(c);return new M(i,this._parents)}function hn(e){return new Array(e.length)}function Lr(){return new M(this._enter||this._groups.map(hn),this._parents)}function Le(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Le.prototype={constructor:Le,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qr(e){return function(){return e}}function Jr(e,t,n,i,r,o){for(var l=0,a,c=t.length,s=o.length;l<s;++l)(a=t[l])?(a.__data__=o[l],i[l]=a):n[l]=new Le(e,o[l]);for(;l<c;++l)(a=t[l])&&(r[l]=a)}function Mr(e,t,n,i,r,o,l){var a,c,s=new Map,f=t.length,u=o.length,p=new Array(f),d;for(a=0;a<f;++a)(c=t[a])&&(p[a]=d=l.call(c,c.__data__,a,t)+"",s.has(d)?r[a]=c:s.set(d,c));for(a=0;a<u;++a)d=l.call(e,o[a],a,o)+"",(c=s.get(d))?(i[a]=c,c.__data__=o[a],s.delete(d)):n[a]=new Le(e,o[a]);for(a=0;a<f;++a)(c=t[a])&&s.get(p[a])===c&&(r[a]=c)}function Ur(e){return e.__data__}function Yr(e,t){if(!arguments.length)return Array.from(this,Ur);var n=t?Mr:Jr,i=this._parents,r=this._groups;typeof e!="function"&&(e=qr(e));for(var o=r.length,l=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var f=i[s],u=r[s],p=u.length,d=zr(e.call(f,f&&f.__data__,s,i)),_=d.length,m=a[s]=new Array(_),y=l[s]=new Array(_),A=c[s]=new Array(p);n(f,u,m,y,A,d,t);for(var w=0,O=0,E,I;w<_;++w)if(E=m[w]){for(w>=O&&(O=w+1);!(I=y[O])&&++O<_;);E._next=I||null}}return l=new M(l,i),l._enter=a,l._exit=c,l}function zr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $r(){return new M(this._exit||this._groups.map(hn),this._parents)}function Qr(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Gr(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,l=Math.min(r,o),a=new Array(r),c=0;c<l;++c)for(var s=n[c],f=i[c],u=s.length,p=a[c]=new Array(u),d,_=0;_<u;++_)(d=s[_]||f[_])&&(p[_]=d);for(;c<r;++c)a[c]=n[c];return new M(a,this._parents)}function Dr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],l;--r>=0;)(l=i[r])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Fr(e){e||(e=Wr);function t(u,p){return u&&p?e(u.__data__,p.__data__):!u-!p}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var l=n[o],a=l.length,c=r[o]=new Array(a),s,f=0;f<a;++f)(s=l[f])&&(c[f]=s);c.sort(t)}return new M(r,this._parents).order()}function Wr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vr(){return Array.from(this)}function Kr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var l=i[r];if(l)return l}return null}function Zr(){let e=0;for(const t of this)++e;return e}function Xr(){return!this.node()}function ei(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,l=r.length,a;o<l;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function ti(e){return function(){this.removeAttribute(e)}}function ni(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ri(e,t){return function(){this.setAttribute(e,t)}}function ii(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function li(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function si(e,t){var n=an(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ni:ti:typeof t=="function"?n.local?li:oi:n.local?ii:ri)(n,t))}function dn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ai(e){return function(){this.style.removeProperty(e)}}function ci(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ui(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function fi(e,t,n){return arguments.length>1?this.each((t==null?ai:typeof t=="function"?ui:ci)(e,t,n==null?"":n)):hi(this.node(),e)}function hi(e,t){return e.style.getPropertyValue(t)||dn(e).getComputedStyle(e,null).getPropertyValue(t)}function di(e){return function(){delete this[e]}}function pi(e,t){return function(){this[e]=t}}function _i(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mi(e,t){return arguments.length>1?this.each((t==null?di:typeof t=="function"?_i:pi)(e,t)):this.node()[e]}function pn(e){return e.trim().split(/^|\s+/)}function ut(e){return e.classList||new _n(e)}function _n(e){this._node=e,this._names=pn(e.getAttribute("class")||"")}_n.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mn(e,t){for(var n=ut(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function gn(e,t){for(var n=ut(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function gi(e){return function(){mn(this,e)}}function yi(e){return function(){gn(this,e)}}function wi(e,t){return function(){(t.apply(this,arguments)?mn:gn)(this,e)}}function bi(e,t){var n=pn(e+"");if(arguments.length<2){for(var i=ut(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?wi:t?gi:yi)(n,t))}function vi(){this.textContent=""}function Si(e){return function(){this.textContent=e}}function Ai(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ei(e){return arguments.length?this.each(e==null?vi:(typeof e=="function"?Ai:Si)(e)):this.node().textContent}function Oi(){this.innerHTML=""}function Ni(e){return function(){this.innerHTML=e}}function Ci(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ri(e){return arguments.length?this.each(e==null?Oi:(typeof e=="function"?Ci:Ni)(e)):this.node().innerHTML}function ki(){this.nextSibling&&this.parentNode.appendChild(this)}function xi(){return this.each(ki)}function Ii(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hi(){return this.each(Ii)}function Pi(e){var t=typeof e=="function"?e:cn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ti(){return null}function Bi(e,t){var n=typeof e=="function"?e:cn(e),i=t==null?Ti:typeof t=="function"?t:un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Li(){var e=this.parentNode;e&&e.removeChild(this)}function qi(){return this.each(Li)}function Ji(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mi(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ui(e){return this.select(e?Mi:Ji)}function Yi(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zi(e){return function(t){e.call(this,t,this.__data__)}}function $i(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Qi(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function Gi(e,t,n){return function(){var i=this.__on,r,o=zi(t);if(i){for(var l=0,a=i.length;l<a;++l)if((r=i[l]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Di(e,t,n){var i=$i(e+""),r,o=i.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,s=a.length,f;c<s;++c)for(r=0,f=a[c];r<o;++r)if((l=i[r]).type===f.type&&l.name===f.name)return f.value}return}for(a=t?Gi:Qi,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function yn(e,t,n){var i=dn(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Fi(e,t){return function(){return yn(this,e,t)}}function Wi(e,t){return function(){return yn(this,e,t.apply(this,arguments))}}function ji(e,t){return this.each((typeof t=="function"?Wi:Fi)(e,t))}function*Vi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,l;r<o;++r)(l=i[r])&&(yield l)}var Ki=[null];function M(e,t){this._groups=e,this._parents=t}function Zi(){return this}M.prototype={constructor:M,select:br,selectAll:Or,selectChild:xr,selectChildren:Tr,filter:Br,data:Yr,enter:Lr,exit:$r,join:Qr,merge:Gr,selection:Zi,order:Dr,sort:Fr,call:jr,nodes:Vr,node:Kr,size:Zr,empty:Xr,each:ei,attr:si,style:fi,property:mi,classed:bi,text:Ei,html:Ri,raise:xi,lower:Hi,append:Pi,insert:Bi,remove:qi,clone:Ui,datum:Yi,on:Di,dispatch:ji,[Symbol.iterator]:Vi};function _e(e){return typeof e=="string"?new M([[document.querySelector(e)]],[document.documentElement]):new M([[e]],Ki)}const ee=[];function wn(e,t=B){let n;const i=new Set;function r(a){if(we(e,a)&&(e=a,n)){const c=!ee.length;for(const s of i)s[1](),ee.push(s,e);if(c){for(let s=0;s<ee.length;s+=2)ee[s][0](ee[s+1]);ee.length=0}}}function o(a){r(a(e))}function l(a,c=B){const s=[a,c];return i.add(s),i.size===1&&(n=t(r)||B),a(e),()=>{i.delete(s),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}let ue=wn([]),qe=wn(null);function Jt(e){let t,n,i,r,o;return{c(){t=g("div"),n=g("p"),i=$(e[2]),r=v(),o=g("p"),o.innerHTML='Help us <a href="https://github.com/cudbg/sqltutor">add it to the codebase</a>!',b(t,"class","bd-callout svelte-1dmtwhn")},m(l,a){G(l,t,a),h(t,n),h(n,i),h(t,r),h(t,o)},p(l,a){a&4&&xe(i,l[2])},d(l){l&&U(t)}}}function Xi(e){let t,n,i=e[1].name+"",r,o,l,a,c=e[1].id+"",s,f,u,p=e[1].str+"",d,_,m,y,A,w=e[2]&&Jt(e);return{c(){t=g("div"),n=g("h3"),r=$(i),o=v(),l=g("small"),a=$("id: "),s=$(c),f=v(),u=g("p"),d=$(p),_=v(),m=g("div"),A=v(),w&&w.c(),b(l,"class","text-muted"),b(n,"class","stepHeader"),b(u,"class","stepDesc"),b(m,"id",y=`vis-${e[0]}`),b(t,"class","step")},m(O,E){G(O,t,E),h(t,n),h(n,r),h(n,o),h(n,l),h(l,a),h(l,s),h(t,f),h(t,u),h(u,d),h(t,_),h(t,m),e[5](m),h(t,A),w&&w.m(t,null)},p(O,[E]){E&2&&i!==(i=O[1].name+"")&&xe(r,i),E&2&&c!==(c=O[1].id+"")&&xe(s,c),E&2&&p!==(p=O[1].str+"")&&xe(d,p),E&1&&y!==(y=`vis-${O[0]}`)&&b(m,"id",y),O[2]?w?w.p(O,E):(w=Jt(O),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i:B,o:B,d(O){O&&U(t),e[5](null),w&&w.d()}}}function eo(e,t,n){let i;me(e,qe,m=>n(4,i=m));const r={HASH_JOIN:T,PIECEWISE_MERGE_JOIN:T,BLOCKWISE_NL_JOIN:T,NESTED_LOOP_JOIN:T,DELIM_JOIN:T,CROSS_PRODUCT:T,ThetaJoin:T,HASH_GROUP_BY:Be,PERFECT_HASH_GROUP_BY:Be,UNGROUPED_AGGREGATE:ln,FILTER:Q,LIMIT:Q,STREAMING_LIMIT:Q,ORDER_BY:Q,SEQ_SCAN:ie,CHUNK_SCAN:ie,DELIM_SCAN:ie,PROJECTION:on,root:sn};let o=null,{opid:l}=t,a={},c={},s=()=>"";console.log("lineageStep setup",i);let f=null,u=null;function p(){if(l==null)return;if(f&&f.destroy(),!s){n(2,o="Don't know how to render this yet :(");return}n(2,o=null);let y={type:"sql",trace:[s(l,i,c)]};console.log(y);try{f=createVisualizer(`#vis-${l}`,y)}catch(A){console.error(A)}finally{d()}}function d(){let m=_e(u.querySelector(".table_pair"));m.select(".leftWST .wstRoot").insert("caption",":first-child").text(c.tableCaptions.lhs),c.tableCaptions.lhs2&&m.select(".leftWST2 .wstRoot").insert("caption",":first-child").text(c.tableCaptions.lhs2),m.select(".rightWST .wstRoot").insert("caption",":first-child").text(c.tableCaptions.rhs)}Je(()=>{}),Wt(async()=>{console.log("afterupdate"),p(),await pe(),p()}),jt(()=>{console.log("destroy"),f&&f.destroy()});function _(m){D[m?"unshift":"push"](()=>{u=m,n(3,u)})}return e.$$set=m=>{"opid"in m&&n(0,l=m.opid)},e.$$.update=()=>{var m;e.$$.dirty&19&&(n(1,a=(m=i.info[l])!=null?m:{}),c={opID:l,opType:null,headerName:a.name,desc:null,tableCaptions:{lhs:null,lhs2:null,rhs:""}},s=r[a.name])},[l,a,o,u,i,_]}class to extends ze{constructor(t){super(),Ye(this,t,eo,Xi,we,{opid:0})}}const bn={root:["ORDER_BY_5"],ORDER_BY_5:["HASH_GROUP_BY_4"],HASH_GROUP_BY_4:["PROJECTION_3"],PROJECTION_3:["HASH_JOIN_2"],HASH_JOIN_2:["SEQ_SCAN_0","SEQ_SCAN_1"],SEQ_SCAN_0:[],SEQ_SCAN_1:[]},vn="SELECT cid, name, sum(amount) FROM customers JOIN sales USING (cid) GROUP BY cid, name ORDER BY cid",Sn=5,ft={SEQ_SCAN_0:{str:"Input: sales | EC: 5",id:"SEQ_SCAN_0",display_name:"SEQ_SCAN",id_number:"0",name:"SEQ_SCAN",schema:[],table_name:"sales",depth:5},SEQ_SCAN_1:{str:"Input: customers | EC: 3",id:"SEQ_SCAN_1",display_name:"SEQ_SCAN",id_number:"1",name:"SEQ_SCAN",schema:[],table_name:"customers",depth:5},HASH_JOIN_2:{str:`INNER
cid=cid

,
`,id:"HASH_JOIN_2",display_name:"HASH_JOIN",id_number:"2",name:"HASH_JOIN",schema:[],table_name:"SEQ_SCAN_0+SEQ_SCAN_1",depth:4},PROJECTION_3:{str:" Cols: [cid,name,amount]",id:"PROJECTION_3",display_name:"PROJECTION",id_number:"3",name:"PROJECTION",schema:["cid","name","amount"],table_name:"HASH_JOIN_2",depth:3},HASH_GROUP_BY_4:{str:"Key: [cid,name], Aggs: [sum(#2)]",id:"HASH_GROUP_BY_4",display_name:"HASH_GROUP_BY",id_number:"4",name:"HASH_GROUP_BY",schema:["cid","name","sum(#2)"],table_name:"PROJECTION_3",depth:2},ORDER_BY_5:{str:`ORDERS:
customers.cid ASC`,id:"ORDER_BY_5",display_name:"ORDER_BY",id_number:"5",name:"ORDER_BY",schema:["cid","name","sum(#2)"],table_name:"HASH_GROUP_BY_4",depth:1}},An={ORDER_BY_5:[[0,[[0,0],[1,1],[2,2]]]],HASH_GROUP_BY_4:[[0,[[0,0],[0,1],[1,2],[2,3],[2,4]]]],PROJECTION_3:[],HASH_JOIN_2:[[0,[[0,0],[1,1],[2,2],[3,3],[4,4]]],[1,[[0,0],[1,0],[2,1],[3,2],[4,2]]]],SEQ_SCAN_0:[[0,[[0,0],[1,1],[2,2],[3,3],[4,4]]]],SEQ_SCAN_1:[[0,[[0,0],[1,1],[2,2]]]]},En={HASH_JOIN_2:[[0]],PROJECTION_3:[[0],[3],[1]],HASH_GROUP_BY_4:[[0],[1],[2]],ORDER_BY_5:[[0],[1],[2]]},On={},Nn={},Cn={SEQ_SCAN_0:{rows:[["1","50"],["1","30"],["2","25"],["3","40"],["3","15"]],columns:["cid","amount"],cardinality:5},SEQ_SCAN_0input:{rows:[["101","1","50"],["102","1","30"],["103","2","25"],["104","3","40"],["105","3","15"]],columns:["oid","cid","amount"],cardinality:5},SEQ_SCAN_1:{rows:[["1","Alice"],["2","Bob"],["3","Ellen"]],columns:["cid","name"],cardinality:3},SEQ_SCAN_1input:{rows:[["1","Alice"],["2","Bob"],["3","Ellen"]],columns:["cid","name"],cardinality:3},HASH_JOIN_2:{rows:[["1","50","1","Alice"],["1","30","1","Alice"],["2","25","2","Bob"],["3","40","3","Ellen"],["3","15","3","Ellen"]],columns:["cid","amount","cid","name"],cardinality:5},PROJECTION_3:{rows:[["1","Alice","50"],["1","Alice","30"],["2","Bob","25"],["3","Ellen","40"],["3","Ellen","15"]],columns:["cid","name","amount"],cardinality:5},HASH_GROUP_BY_4:{rows:[["1","Alice","80"],["2","Bob","25"],["3","Ellen","55"]],columns:["cid","name","sum(#2)"],cardinality:3},ORDER_BY_5:{rows:[["1","Alice","80"],["2","Bob","25"],["3","Ellen","55"]],columns:["cid","name","sum(#2)"],cardinality:3}},no={op:bn,qstr:vn,plan_depth:Sn,info:ft,row:An,col:En,exprs:On,expr:Nn,results:Cn},Mt=Object.freeze(Object.defineProperty({__proto__:null,op:bn,qstr:vn,plan_depth:Sn,info:ft,row:An,col:En,exprs:On,expr:Nn,results:Cn,default:no},Symbol.toStringTag,{value:"Module"}));function ro(e){let t,n,i,r;return{c(){t=g("div"),n=g("h5"),n.innerHTML='<small class="text-muted">SELECT * FROM Sales JOIN Customers USING (cid)</small>',i=v(),r=g("div"),b(n,"class","stepHeader"),b(r,"id",`vis-example-${fe}`),b(t,"class","step")},m(o,l){G(o,t,l),h(t,n),h(t,i),h(t,r),e[2](r)},p:B,i:B,o:B,d(o){o&&U(t),e[2](null)}}}let fe="HASH_JOIN_2";function io(e,t,n){const i={HASH_JOIN:T,PIECEWISE_MERGE_JOIN:T,BLOCKWISE_NL_JOIN:T,NESTED_LOOP_JOIN:T,DELIM_JOIN:T,CROSS_PRODUCT:T,ThetaJoin:T,HASH_GROUP_BY:Be,PERFECT_HASH_GROUP_BY:Be,UNGROUPED_AGGREGATE:ln,FILTER:Q,LIMIT:Q,STREAMING_LIMIT:Q,ORDER_BY:Q,SEQ_SCAN:ie,CHUNK_SCAN:ie,DELIM_SCAN:ie,PROJECTION:on,root:sn};let r={},o={},l=()=>"";console.log("lineageStep setup",Mt);let a=null,c=null;function s(){if(a&&a.destroy(),!l)return;let d={type:"sql",trace:[l(fe,Mt,o)]};console.log(d);try{a=createVisualizer(`#vis-example-${fe}`,d)}catch(_){console.error(_)}finally{f()}}function f(){let p=_e(c.querySelector(".table_pair"));p.select(".leftWST .wstRoot").insert("caption",":first-child").text(o.tableCaptions.lhs),o.tableCaptions.lhs2&&p.select(".leftWST2 .wstRoot").insert("caption",":first-child").text(o.tableCaptions.lhs2),p.select(".rightWST .wstRoot").insert("caption",":first-child").text(o.tableCaptions.rhs)}Je(()=>{}),Wt(async()=>{console.log("afterupdate"),s(),await pe(),s()}),jt(()=>{console.log("destroy"),a&&a.destroy()});function u(p){D[p?"unshift":"push"](()=>{c=p,n(0,c)})}return e.$$.update=()=>{var p;e.$$.dirty&2&&(n(1,r=(p=ft[fe])!=null?p:{}),o={opID:fe,opType:null,headerName:r.name,desc:null,tableCaptions:{lhs:null,lhs2:null,rhs:""}},l=i[r.name])},[c,r,u]}class oo extends ze{constructor(t){super(),Ye(this,t,io,ro,we,{})}}function lo(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function so(){return this.eachAfter(lo)}function ao(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function co(e,t){for(var n=this,i=[n],r,o,l=-1;n=i.pop();)if(e.call(t,n,++l,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function uo(e,t){for(var n=this,i=[n],r=[],o,l,a,c=-1;n=i.pop();)if(r.push(n),o=n.children)for(l=0,a=o.length;l<a;++l)i.push(o[l]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function fo(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function ho(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function po(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function _o(e){for(var t=this,n=mo(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function mo(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function go(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function yo(){return Array.from(this)}function wo(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function bo(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*vo(){var e=this,t,n=[e],i,r,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function ht(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Eo)):t===void 0&&(t=Ao);for(var n=new ye(e),i,r=[n],o,l,a,c;i=r.pop();)if((l=t(i.data))&&(c=(l=Array.from(l)).length))for(i.children=l,a=c-1;a>=0;--a)r.push(o=l[a]=new ye(l[a])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(No)}function So(){return ht(this).eachBefore(Oo)}function Ao(e){return e.children}function Eo(e){return Array.isArray(e)?e[1]:null}function Oo(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function No(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ye(e){this.data=e,this.depth=this.height=0,this.parent=null}ye.prototype=ht.prototype={constructor:ye,count:so,each:ao,eachAfter:uo,eachBefore:co,find:fo,sum:ho,sort:po,path:_o,ancestors:go,descendants:yo,leaves:wo,links:bo,copy:So,[Symbol.iterator]:vo};function Co(e,t){return e.parent===t.parent?1:2}function tt(e){var t=e.children;return t?t[0]:e.t}function nt(e){var t=e.children;return t?t[t.length-1]:e.t}function Ro(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function ko(e){for(var t=0,n=0,i=e.children,r=i.length,o;--r>=0;)o=i[r],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function xo(e,t,n){return e.a.parent===t.parent?e.a:n}function He(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}He.prototype=Object.create(ye.prototype);function Io(e){for(var t=new He(e,0),n,i=[t],r,o,l,a;n=i.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),l=a-1;l>=0;--l)i.push(r=n.children[l]=new He(o[l],l)),r.parent=n;return(t.parent=new He(null,0)).children=[t],t}function Ho(){var e=Co,t=1,n=1,i=null;function r(s){var f=Io(s);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(l),i)s.eachBefore(c);else{var u=s,p=s,d=s;s.eachBefore(function(w){w.x<u.x&&(u=w),w.x>p.x&&(p=w),w.depth>d.depth&&(d=w)});var _=u===p?1:e(u,p)/2,m=_-u.x,y=t/(p.x+_+m),A=n/(d.depth||1);s.eachBefore(function(w){w.x=(w.x+m)*y,w.y=w.depth*A})}return s}function o(s){var f=s.children,u=s.parent.children,p=s.i?u[s.i-1]:null;if(f){ko(s);var d=(f[0].z+f[f.length-1].z)/2;p?(s.z=p.z+e(s._,p._),s.m=s.z-d):s.z=d}else p&&(s.z=p.z+e(s._,p._));s.parent.A=a(s,p,s.parent.A||u[0])}function l(s){s._.x=s.z+s.parent.m,s.m+=s.parent.m}function a(s,f,u){if(f){for(var p=s,d=s,_=f,m=p.parent.children[0],y=p.m,A=d.m,w=_.m,O=m.m,E;_=nt(_),p=tt(p),_&&p;)m=tt(m),d=nt(d),d.a=s,E=_.z+w-p.z-y+e(_._,p._),E>0&&(Ro(xo(_,s,u),s,E),y+=E,A+=E),w+=_.m,y+=p.m,O+=m.m,A+=d.m;_&&!nt(d)&&(d.t=_,d.m+=w-A),p&&!tt(m)&&(m.t=p,m.m+=y-O,u=s)}return u}function c(s){s.x*=t,s.y=s.depth*n}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function Po(e){let t,n,i,r,o,l,a,c,s,f,u,p,d;return{c(){t=g("div"),n=g("h3"),i=$(`Query Plan
    `),r=g("button"),r.textContent="prev (\u2190)",o=v(),l=g("button"),l.textContent="next (\u2192)",a=v(),c=Ct("svg"),s=Ct("g"),b(r,"class","btn btn-sm btn-outline-primary"),b(l,"class","btn btn-sm btn-outline-primary"),b(s,"id","qPlanTree"),b(s,"transform",f=`translate(${e[0].l}, ${e[0].t})`),b(c,"id","qPlanTreeSVG"),Pe(()=>e[18].call(t))},m(_,m){G(_,t,m),h(t,n),h(n,i),h(n,r),h(n,o),h(n,l),h(t,a),h(t,c),h(c,s),e[16](s),e[17](c),u=zn(t,e[18].bind(t)),p||(d=[he(window,"keydown",e[5]),he(r,"click",e[14]),he(l,"click",e[15])],p=!0)},p(_,[m]){m&1&&f!==(f=`translate(${_[0].l}, ${_[0].t})`)&&b(s,"transform",f)},i:B,o:B,d(_){_&&U(t),e[16](null),e[17](null),u(),p=!1,oe(d)}}}function To(e,t,n){let i,r;me(e,ue,S=>n(12,i=S)),me(e,qe,S=>n(13,r=S));let{h:o}=t,{margin:l={t:50,r:0,b:50,l:0}}=t,a=null,c=null,s,f,u=!1,p=null,d=0,_,m,y=[],A,w;function O(S,H){if(hr(H[S]))return[S];let q=[];return H[S].forEach(N=>{q=q.concat(O(N,H))}),q.push(S),q}let E=0;function I(S){E+=S,E=Math.max(Math.min(E,y.length-1),0),ke(ue,i=[y[E]],i)}function K(S){S.key=="ArrowLeft"?I(-1):S.key=="ArrowRight"&&I(1)}Je(()=>{n(9,u=!0)});async function le(){var S=_e(A),H=_e(w);H.selectAll("*").remove(),await pe(),console.log(A.parentNode),console.log(d),p=Ho().size([d-l.l-l.r,o-l.t-l.b]),f=p(f),S.attr("height",o).attr("width",d),H.selectAll(".link").data(f.descendants().slice(1)).enter().append("path").attr("class","link").attr("fill","none").attr("stroke","grey").attr("marker-end","url(#arrowHead)").attr("d",N=>`M${N.x},${N.y}C${(N.x+N.parent.x)/2},${N.y} ${(N.x+N.parent.x)/2},${N.parent.y} ${N.parent.x},${N.parent.y}`);let q=H.selectAll(".node").data(f.descendants()).enter().append("g").attr("class",N=>`node opNode ${N.children?"node--internal":" node--leaf"}`).attr("transform",N=>`translate(${N.x},${N.y})`);n(10,_=q.append("text").text(N=>c[N.data.id].display_name).style("text-anchor","middle").attr("role","button").on("click",async function(){let N=[this.__data__.data.id].flat()[0];ke(ue,i=[],i),await pe(),ke(ue,i=[N],i),E=ur(N,y)})),n(11,m={}),_.each(function(){n(11,m[this.__data__.data.id]=this,m)}),E=0,I(0),await pe()}const be=()=>I(-1),se=()=>I(1);function ve(S){D[S?"unshift":"push"](()=>{w=S,n(3,w)})}function Z(S){D[S?"unshift":"push"](()=>{A=S,n(2,A)})}function Se(){d=this.clientWidth,n(1,d)}return e.$$set=S=>{"h"in S&&n(6,o=S.h),"margin"in S&&n(0,l=S.margin)},e.$$.update=()=>{e.$$.dirty&9090&&d&&(n(7,a=r.op),c=r.info,n(8,s={id:a.root,queryPlan:a}),f=ht(s,S=>{var q;return(q=a[S.id])==null?void 0:q.map(N=>({id:N,queryPlan:a}))}),y=O(a.root[0],a),u&&le()),e.$$.dirty&7168&&m&&(_.attr("fill","black").attr("font-size","medium"),(i!=null?i:[]).forEach(H=>{!m[H]||_e(m[H]).attr("fill","red").attr("font-size","x-large")}))},[l,d,A,w,I,K,o,a,s,u,_,m,i,r,be,se,ve,Z,Se]}class Bo extends ze{constructor(t){super(),Ye(this,t,To,Po,we,{h:6,margin:0})}}const Rn={root:["ORDER_BY_5"],ORDER_BY_5:["HASH_GROUP_BY_4"],HASH_GROUP_BY_4:["PROJECTION_3"],PROJECTION_3:["HASH_JOIN_2"],HASH_JOIN_2:["SEQ_SCAN_0","SEQ_SCAN_1"],SEQ_SCAN_0:[],SEQ_SCAN_1:[]},kn="SELECT cid, name, sum(amount) FROM customers JOIN sales USING (cid) GROUP BY cid, name ORDER BY cid",xn=5,In={SEQ_SCAN_0:{str:"Input: sales | EC: 5",id:"SEQ_SCAN_0",display_name:"SEQ_SCAN",id_number:"0",name:"SEQ_SCAN",schema:[],table_name:"sales",depth:5},SEQ_SCAN_1:{str:"Input: customers | EC: 3",id:"SEQ_SCAN_1",display_name:"SEQ_SCAN",id_number:"1",name:"SEQ_SCAN",schema:[],table_name:"customers",depth:5},HASH_JOIN_2:{str:`INNER
cid=cid

,
`,id:"HASH_JOIN_2",display_name:"HASH_JOIN",id_number:"2",name:"HASH_JOIN",schema:[],table_name:"SEQ_SCAN_0+SEQ_SCAN_1",depth:4},PROJECTION_3:{str:" Cols: [cid,name,amount]",id:"PROJECTION_3",display_name:"PROJECTION",id_number:"3",name:"PROJECTION",schema:["cid","name","amount"],table_name:"HASH_JOIN_2",depth:3},HASH_GROUP_BY_4:{str:"Key: [cid,name], Aggs: [sum(#2)]",id:"HASH_GROUP_BY_4",display_name:"HASH_GROUP_BY",id_number:"4",name:"HASH_GROUP_BY",schema:["cid","name","sum(#2)"],table_name:"PROJECTION_3",depth:2},ORDER_BY_5:{str:`ORDERS:
customers.cid ASC`,id:"ORDER_BY_5",display_name:"ORDER_BY",id_number:"5",name:"ORDER_BY",schema:["cid","name","sum(#2)"],table_name:"HASH_GROUP_BY_4",depth:1}},Hn={ORDER_BY_5:[[0,[[0,0],[1,1],[2,2]]]],HASH_GROUP_BY_4:[[0,[[0,0],[0,1],[1,2],[2,3],[2,4]]]],PROJECTION_3:[],HASH_JOIN_2:[[0,[[0,0],[1,1],[2,2],[3,3],[4,4]]],[1,[[0,0],[1,0],[2,1],[3,2],[4,2]]]],SEQ_SCAN_0:[[0,[[0,0],[1,1],[2,2],[3,3],[4,4]]]],SEQ_SCAN_1:[[0,[[0,0],[1,1],[2,2]]]]},Pn={HASH_JOIN_2:[[0]],PROJECTION_3:[[0],[3],[1]],HASH_GROUP_BY_4:[[0],[1],[2]],ORDER_BY_5:[[0],[1],[2]]},Tn={},Bn={},Ln={SEQ_SCAN_0:{rows:[["1","50"],["1","30"],["2","25"],["3","40"],["3","15"]],columns:["cid","amount"],cardinality:5},SEQ_SCAN_0input:{rows:[["101","1","50"],["102","1","30"],["103","2","25"],["104","3","40"],["105","3","15"]],columns:["oid","cid","amount"],cardinality:5},SEQ_SCAN_1:{rows:[["1","Alice"],["2","Bob"],["3","Ellen"]],columns:["cid","name"],cardinality:3},SEQ_SCAN_1input:{rows:[["1","Alice"],["2","Bob"],["3","Ellen"]],columns:["cid","name"],cardinality:3},HASH_JOIN_2:{rows:[["1","50","1","Alice"],["1","30","1","Alice"],["2","25","2","Bob"],["3","40","3","Ellen"],["3","15","3","Ellen"]],columns:["cid","amount","cid","name"],cardinality:5},PROJECTION_3:{rows:[["1","Alice","50"],["1","Alice","30"],["2","Bob","25"],["3","Ellen","40"],["3","Ellen","15"]],columns:["cid","name","amount"],cardinality:5},HASH_GROUP_BY_4:{rows:[["1","Alice","80"],["2","Bob","25"],["3","Ellen","55"]],columns:["cid","name","sum(#2)"],cardinality:3},ORDER_BY_5:{rows:[["1","Alice","80"],["2","Bob","25"],["3","Ellen","55"]],columns:["cid","name","sum(#2)"],cardinality:3}},Lo={op:Rn,qstr:kn,plan_depth:xn,info:In,row:Hn,col:Pn,exprs:Tn,expr:Bn,results:Ln},qo=Object.freeze(Object.defineProperty({__proto__:null,op:Rn,qstr:kn,plan_depth:xn,info:In,row:Hn,col:Pn,exprs:Tn,expr:Bn,results:Ln,default:Lo},Symbol.toStringTag,{value:"Module"}));function Jo(){var e=new Date().getTime(),t=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=Math.random()*16;return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),(n==="x"?i:i&3|8).toString(16)})}function Ut(e,t,n){const i=e.slice();return i[11]=t[n],i}function Yt(e,t,n){const i=e.slice();return i[11]=t[n],i}function zt(e){let t,n;return t=new oo({props:{opid:e[11]}}),{c(){at(t.$$.fragment)},m(i,r){Me(t,i,r),n=!0},p(i,r){const o={};r&8&&(o.opid=i[11]),t.$set(o)},i(i){n||(J(t.$$.fragment,i),n=!0)},o(i){Y(t.$$.fragment,i),n=!1},d(i){Ue(t,i)}}}function $t(e){let t,n,i,r,o,l,a,c,s;r=new Bo({props:{h:e[0].plan_depth*50+100}});let f=[e[3]].flat(),u=[];for(let d=0;d<f.length;d+=1)u[d]=Qt(Ut(e,f,d));const p=d=>Y(u[d],1,1,()=>{u[d]=null});return{c(){t=g("div"),n=g("div"),i=g("div"),at(r.$$.fragment),o=v(),l=g("div"),a=g("div"),c=g("div");for(let d=0;d<u.length;d+=1)u[d].c();b(i,"class","row svelte-1h07inm"),b(n,"class","row viscontainer svelte-1h07inm"),b(t,"class","col-md-7 viscontainer svelte-1h07inm"),b(c,"id","vis"),b(a,"class","row viscontainer svelte-1h07inm"),b(l,"class","col-md-5 viscontainer svelte-1h07inm")},m(d,_){G(d,t,_),h(t,n),h(n,i),Me(r,i,null),e[4](i),G(d,o,_),G(d,l,_),h(l,a),h(a,c);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(c,null);e[5](c),s=!0},p(d,_){const m={};if(_&1&&(m.h=d[0].plan_depth*50+100),r.$set(m),_&8){f=[d[3]].flat();let y;for(y=0;y<f.length;y+=1){const A=Ut(d,f,y);u[y]?(u[y].p(A,_),J(u[y],1)):(u[y]=Qt(A),u[y].c(),J(u[y],1),u[y].m(c,null))}for(it(),y=f.length;y<u.length;y+=1)p(y);ot()}},i(d){if(!s){J(r.$$.fragment,d);for(let _=0;_<f.length;_+=1)J(u[_]);s=!0}},o(d){Y(r.$$.fragment,d),u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)Y(u[_]);s=!1},d(d){d&&U(t),Ue(r),e[4](null),d&&U(o),d&&U(l),Ft(u,d),e[5](null)}}}function Qt(e){let t,n;return t=new to({props:{opid:e[11]}}),{c(){at(t.$$.fragment)},m(i,r){Me(t,i,r),n=!0},p(i,r){const o={};r&8&&(o.opid=i[11]),t.$set(o)},i(i){n||(J(t.$$.fragment,i),n=!0)},o(i){Y(t.$$.fragment,i),n=!1},d(i){Ue(t,i)}}}function Mo(e){let t,n,i,r,o,l,a,c,s,f,u,p,d,_,m,y,A,w,O,E,I,K,le,be,se,ve,Z,Se,S,H,q,N,Ae,dt,Qe,pt,Ge,_t,Ee,mt,Oe,gt,De,yt,Fe,wt,We,bt,je,vt,Ne,St,Ve,At,Ke,ae,Et,ce,Ce,F=[e[3]].flat(),R=[];for(let C=0;C<F.length;C+=1)R[C]=zt(Yt(e,F,C));const qn=C=>Y(R[C],1,1,()=>{R[C]=null});let x=e[0]&&$t(e);return{c(){t=g("main"),n=g("h1"),n.innerHTML='SmokedDuck  <small class="svelte-1h07inm"><a href="https://github.com/cudbg/smokedduck/" target="_blank" class="svelte-1h07inm">GitHub</a></small>',i=v(),r=g("div"),o=g("h2"),o.textContent="Introduction",l=v(),a=g("p"),a.innerHTML=`There is a growing recognition of the importance of data governance <a href="https://dl.acm.org/doi/10.1145/3524284" target="_blank" class="svelte-1h07inm">[1]</a>
      which involves managing, securing, and ensuring the quality and compliance of organizational data.
      An important piece is lineage, which maintains the relationship between data programs\u2019 input and output.`,c=v(),s=g("p"),s.textContent=`But, today\u2019s lineage solutions track dependencies at the granularity of files and tables. 
      This means a user can track which files/tables an output of a data program depends on.
      Its coarse grained nature (e.g. output of Q(R) depends on input relation R) limits its usage.`,f=v(),u=g("div"),p=g("div"),p.innerHTML=`<p>For instance, how do you trace an error in a single row of data through your data warehouse back to its source(s)? How do you delete all rows of data about a user throughout your data lake? How do you figure out why an outlying value in your chart is so high?</p> 
      <p>Fine-grained (row) provenance, also known as row-level lineage, quickly answers these questions and more [
<a href="https://dspace.mit.edu/handle/1721.1/132280" target="_blank" class="svelte-1h07inm">2</a>, 
<a href="http://www.vldb.org/pvldb/vol6/p553-wu.pdf" target="_blank" class="svelte-1h07inm">3</a>,
<a href="https://www.vldb.org/conf/2004/RS22P1.PDF" target="_blank" class="svelte-1h07inm">4</a>,
<a href="https://arxiv.org/abs/1805.02622" target="_blank" class="svelte-1h07inm">5</a>].
      It tracks relationship between input and output of a data program at the row-level.
      The visualization on the right shows lineage as arrows and represent how tuples are combined to construct the output.   
      For example, the first two rows in Sales relation  were combined with the first row from Customers  and used to compute the first two rows in the output.</p> 
      <p>This rich class of metadata has historically been too expensive to capture for analytical workloads (&gt;2\u22121000\xD7 [
<a href="http://www.cs.iit.edu/~dbgroup/bibliography/AF18.html" target="_blank" class="svelte-1h07inm">5</a> ,
<a href="https://arxiv.org/abs/1805.11517" target="_blank" class="svelte-1h07inm">6</a>]) - until today. We present SmokedDuck, the first fine-grained provenance research database built for scale.</p> 
      <p>SmokedDuck is a fork of <a href="https://duckdb.org" class="svelte-1h07inm">DuckDB</a> instrumented to provide fine-grained provenance. It is designed to capture lineage with low overhead, with an average of 0.15x on TPCH workload lower than prior approaches, and fast enough to avoid blocking user\u2019s interactions. We are releasing this experimental prototype to support researchers and academics in using lineage to support provenance-powered use cases.</p>`,d=v(),_=g("div"),m=v(),y=g("div"),A=g("div");for(let C=0;C<R.length;C+=1)R[C].c();w=v(),O=g("p"),O.textContent="SmokedDuck uses physical instrumentation to capture lineage. The current version instrumentation is limited to single threaded execution and supports all logical relational operators. The physical operators currently supported are: Hash Join, Piecewise Merge Join, Nested Loop Join, Block Nested Loop Join, Cross Product, Filter, Table Scan, Limit, Streaming Limit, Order By, Hash Aggregate, Perfect Hash Aggregate.",E=v(),I=g("h2"),I.textContent="Installation",K=v(),le=g("p"),le.textContent="To install SmokedDuck (lineage enabled DuckDB), use the following command. It  works on Macs, and Unix.",be=v(),se=g("p"),se.innerHTML="<code>pip3 install smokedduck</code>",ve=v(),Z=g("h2"),Z.textContent="Python API",Se=v(),S=g("p"),S.innerHTML=`Our recommended use is via the <a href="https://github.com/cudbg/smokedduck/blob/lineage_capture_v4/README.md#smokedduck-interface" class="svelte-1h07inm">Python API</a>,
and we illustrate basic usage on simple query in the following Python
<a href="https://github.com/cudbg/smokedduck/blob/notebook_example/smokedduck/totalsalespercustomer.ipynb" target="_blank" class="svelte-1h07inm">notebook</a>.
The notebook illustrates how to use SmokedDuck Python API to capture and query lineage.
It loads Customers and Sales relations, then computes the total amount paid by each customer.`,H=v(),q=g("p"),q.innerHTML=`You can lookup other python based examples
 <a href="https://github.com/cudbg/smokedduck/tree/notebook_example/smokedduck" target="_blank" class="svelte-1h07inm">here</a>.
`,N=$(`.
      `),Ae=g("h3"),Ae.textContent="Capturing Lineage",dt=v(),Qe=g("p"),Qe.textContent="Fine-grained lineage tracks the relationships between inputs and outputs of a query. The following command executes user's query with lineage capture enabled:",pt=v(),Ge=g("div"),Ge.innerHTML="<code>con.execute(&#39;SELECT cid, name, sum(amount) FROM customers JOIN sales USING (cid) GROUP BY cid, name ORDER BY cid&#39;, capture_lineage=&#39;lineage&#39;).df()</code>",_t=v(),Ee=g("p"),Ee.innerHTML=`The <code>execute()</code> takes the argument <code>capture_lineage=&#39;lineage&#39;</code> 
 which enables lineage capture during query execution.
SmokedDuck uses an eager approach [<a href="https://arxiv.org/abs/1801.07237" target="_blank" class="svelte-1h07inm">8</a>] to capture lineage where, 
during query execution, it computes and stores dependencies between input and output records for each operator.`,mt=v(),Oe=g("h3"),Oe.textContent="Querying Lineage",gt=v(),De=g("p"),De.textContent="After evaluating the query, the user can access lineage for individual physical operators or access query level lineage.  We provide several extension APIs to access lineage output.",yt=v(),Fe=g("p"),Fe.innerHTML="The most common use case is to find the input rows that contributed to a given set of output rows (backward tracing), or vice versa (forward tracing).  We support these using the <code>backward()</code> and <code>forward()</code> api calls.  For instance:",wt=v(),We=g("p"),We.innerHTML="In some cases, you may want to know more details on how input rows were combined at each operator to derive each output row of interest.   The provenance literature defines many provenance models suitable for different use cases.   SmokedDuck supports APIs for the common models:  <code>Why()</code>, <code>Polynomial()</code>, <code>Lineage()</code> which format the lineage output based on different provenance models.",bt=v(),je=g("p"),je.innerHTML='You can read more details about the provenance models and the API in the <a href="https://github.com/cudbg/smokedduck/blob/lineage_capture_v4/README.md#extensions" target="_blank" class="svelte-1h07inm">README.md</a>.',vt=v(),Ne=g("h3"),Ne.textContent="Visualizing Lineage",St=v(),Ve=g("p"),Ve.innerHTML=`The following visualization breaks down lineage for the example query and uses the <a href="https://haneensa.github.io/sqltutor/" target="_blank" class="svelte-1h07inm">SQLTutor</a>
 application that we built to visualize the physical query plan and its captured lineage information.
Play around with it see the data flow in any* DuckDB query!
You can checkout our demo paper [<a href="https://drive.google.com/file/d/1NULWQJl_FL8oQYZcbT2VVvem7lwZtlP0/view?usp=share_link" target="_blank" class="svelte-1h07inm">9</a>] for an overview of the implementation details.`,At=v(),x&&x.c(),Ke=v(),ae=g("div"),ae.innerHTML=`<h2 class="svelte-1h07inm">Development</h2> 
<p>This is an inital release. We will be extending supported physical operators and API to make it easier for users to use lineage.
Below is our current development roadmap.</p> 

  <h3 class="svelte-1h07inm">Roadmap</h3> 
  <div><ul><li>Add support for lineage capture and query with multi-threading execution</li> 
    <li>Add support for all DuckDB\u2019s physical operators (AsOf, IE, Positional joins, Window)</li> 
    <li>Extend API with Provenance Polynomial Evaluation</li> 
    <li>Provide SmokedDuck as DuckDB extension</li> 
    <li>Support lineage compression</li></ul></div>`,Et=v(),ce=g("div"),ce.innerHTML=`<div class="col-md-8 offset-md-2 text-center" style="border-top: 1px solid grey;"><p>Please reach out to us if you&#39;re interested in using SmokedDuck or if you run into any issues.
You can reach us quickly by creating a GitHub issue or emailing us at <a href="mailto:smokedduck@gmail.com" target="_blank" class="svelte-1h07inm">smokedduck@gmail.com</a></p> 
    
    <p style="font-size:smaller;">Table vis from <a href="https://pandastutor.com/" class="svelte-1h07inm">pandastutor</a>.</p></div>`,b(n,"class","display-5 text-start"),b(o,"class","svelte-1h07inm"),b(p,"class","col-md-5 viscontainer svelte-1h07inm"),b(_,"class","col-md-2 viscontainer svelte-1h07inm"),b(A,"id","vis-example"),b(y,"class","col-md-5 viscontainer svelte-1h07inm"),b(u,"class","row svelte-1h07inm"),b(I,"class","svelte-1h07inm"),b(Z,"class","svelte-1h07inm"),b(Ae,"class","svelte-1h07inm"),Ze(Ee,"margin-top","20px"),b(Oe,"class","svelte-1h07inm"),b(Ne,"class","svelte-1h07inm"),b(ae,"class","row svelte-1h07inm"),Ze(ae,"margin-top","30px"),b(ce,"class","row footer svelte-1h07inm"),Ze(ce,"margin-top","3em"),b(r,"class","row  svelte-1h07inm"),b(t,"class","container-fluid")},m(C,P){G(C,t,P),h(t,n),h(t,i),h(t,r),h(r,o),h(r,l),h(r,a),h(r,c),h(r,s),h(r,f),h(r,u),h(u,p),h(u,d),h(u,_),h(u,m),h(u,y),h(y,A);for(let k=0;k<R.length;k+=1)R[k]&&R[k].m(A,null);h(r,w),h(r,O),h(r,E),h(r,I),h(r,K),h(r,le),h(r,be),h(r,se),h(r,ve),h(r,Z),h(r,Se),h(r,S),h(r,H),h(r,q),h(r,N),h(r,Ae),h(r,dt),h(r,Qe),h(r,pt),h(r,Ge),h(r,_t),h(r,Ee),h(r,mt),h(r,Oe),h(r,gt),h(r,De),h(r,yt),h(r,Fe),h(r,wt),h(r,We),h(r,bt),h(r,je),h(r,vt),h(r,Ne),h(r,St),h(r,Ve),h(r,At),x&&x.m(r,null),h(r,Ke),h(r,ae),h(r,Et),h(r,ce),Ce=!0},p(C,[P]){if(P&8){F=[C[3]].flat();let k;for(k=0;k<F.length;k+=1){const Ot=Yt(C,F,k);R[k]?(R[k].p(Ot,P),J(R[k],1)):(R[k]=zt(Ot),R[k].c(),J(R[k],1),R[k].m(A,null))}for(it(),k=F.length;k<R.length;k+=1)qn(k);ot()}C[0]?x?(x.p(C,P),P&1&&J(x,1)):(x=$t(C),x.c(),J(x,1),x.m(r,Ke)):x&&(it(),Y(x,1,1,()=>{x=null}),ot())},i(C){if(!Ce){for(let P=0;P<F.length;P+=1)J(R[P]);J(x),Ce=!0}},o(C){R=R.filter(Boolean);for(let P=0;P<R.length;P+=1)Y(R[P]);Y(x),Ce=!1},d(C){C&&U(t),Ft(R,C),x&&x.d()}}}function Uo(e,t,n){var f;let i,r;me(e,qe,u=>n(0,i=u)),me(e,ue,u=>n(3,r=u)),Jo(),ke(qe,i=qo,i);let o,l=new URLSearchParams(window.location.search),a;(f=l.get("q"))!=null,Je(()=>{});function c(u){D[u?"unshift":"push"](()=>{a=u,n(2,a)})}function s(u){D[u?"unshift":"push"](()=>{o=u,n(1,o)})}return e.$$.update=()=>{e.$$.dirty&1&&i.plan_depth*50+100},[i,o,a,r,c,s]}class Yo extends ze{constructor(t){super(),Ye(this,t,Uo,Mo,we,{})}}new Yo({target:document.getElementById("app")});
